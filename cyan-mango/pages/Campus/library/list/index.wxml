<!-- <wxs module='common' src="../../common.wxs"></wxs> -->
<navBar title="å›¾ä¹¦é¦†"></navBar>

<!-- æœç´¢æ¡† -->
<form bindsubmit='formSubmit'>
	<view class="cu-bar search bg-white fixed" style="top: {{nav_height}}px">
		<view class="search-form round">
			<text class="cuIcon-search"></text>
			<input type="text" name="query" placeholder="å›¾ä¹¦æ£€ç´¢" confirm-type="search"></input>
		</view>
		<view class="action">
			<button class="cu-btn bg-green shadow-blur round" formType="submit" hover-stay-time='0.2s'>æ£€ç´¢</button>
		</view>
	</view>
</form>


<view class='cu-load load-modal' wx:if="{{loading}}">
	<view class='cuIcon-emojifill text-orange'></view>
	<view class='gray-text'>ğŸ”æœç´¢ä¸­</view>
</view>

<view id="book-list" style="margin-top:120rpx">
	<view wx:for="{{books}}" wx:key="index" class='book' bindtap='navToDetail' id='{{index}}' data-wl_id="{{item.wlid}}" data-primary_id="{{item.primary_id}}" data-image="{{item.image}}">
		<view class='book-name'>{{index+1}}ã€{{item.name}}</view>
		<view class='book-info'>
			<view class='cover'>
				<image mode='aspectFit' src='{{item.image.length!=0?item.image:noCover}}'></image>
			</view>

			<view class='info text-black'>
				<view class='author'>ä½œè€…ï¼š{{item.author}}</view>
				<view class='pub margin-top-xs'>å‡ºç‰ˆç¤¾ï¼š{{item.publish}}</view>
				<view class='pub margin-top-xs'>åˆ†ç±»ï¼š{{item.category}}</view>
				<view class='call-No margin-top-xs'>ç´¢ä¹¦å·ï¼š{{item.index_number}}</view>
				<view class='collection margin-top-xs'>
					<view style='background:#f8e8e8;color:#a3816a'>é¦†è—å¤æœ¬æ•°ï¼š{{item.collection}}</view>
					<view style='background:#defcfc;color:#72dd1b'>å¯å€Ÿæ•°ï¼š{{item.borrowable}}</view>
				</view>
			</view>

		</view>
	</view>
</view>

<!-- <view wx:if="{{!bool}}" class='switch-page'>
	<view>ç¬¬ {{page}} é¡µ</view>
	<image bindtap='loadMore' id='next' mode='widthFix' src='/assets/back.png' style='transform:rotate(-90deg);'></image>
	<view>å…± {{pages}} é¡µ</view>
</view> -->
<!-- <view style='font-size:55%;color:grey;text-align:center;margin-bottom:10rpx'>ç”±äºè±†ç“£apiçš„é™åˆ¶ï¼Œå¯èƒ½ç»å¸¸ä¼šæ— æ³•è·å–å°é¢</view> -->

<view id="switch-btn">
	<button class="cu-btn top bg-green button-hover round" plain="{{true}}" bindtap="scrollPageToTop">
		<view class="cuIcon-fold text-white" style="font-size:150%"></view>
	</button>

	<button class="cu-btn bottom bg-green button-hover round" plain="{{true}}" bindtap="scrollPageToBottom">
		<view class="cuIcon-unfold text-white" style="font-size:150%"></view>
	</button>
</view>

<!-- æ£€ç´¢å¤±è´¥æç¤º -->
<modal show="{{tip}}" title="å›¾ä¹¦é¦†" cancelText="å–æ¶ˆ" confirmText="å›¾ä¹¦é¦†" width="85%" bind:confirm="redirectToLibrary">
	<view class="margin-lr-xl">
		<view>
			<text class="cuIcon-roundclose text-red margin-sm"></text>
			<text class="text-gray text-lg">{{tip_content}}</text>
		</view>
		<view wx:if="{{tip_error}}" class="margin-top">
			<text class="{{tip_error == 1 ? 'cuIcon-warn text-orange': 'cuIcon-roundclose text-red'}} margin-sm"></text>
			<text class="text-gray text-lg">{{tip_msg}}</text>
		</view>
	</view>
</modal>